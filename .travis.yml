sudo: enabled
dist: trusty

env:
   VERSION=1.2.0
   INSTALL_PREFIX=~/install
   PKG_CONFIG_PATH=$INSTALL_PREFIX/lib/pkgconfig
   LD_LIBRARY_PATH=$INSTALL_PREFIX/lib:$LD_LIBRARY_PATH

before_install:
  # Install Dependencies
  - sudo apt-get update -qq
  - sudo apt-get install autoconf
  - sudo apt-get install automake
  - sudo apt-get install libtool
  - sudo apt-get install pkg-config
  - sudo apt-get install git
  - sudo apt-get install g++
  - sudo apt-get install libssl-dev
  #- sudo apt-get install protobuf-compiler
  #- sudo apt-get install libprotobuf-dev
  - sudo apt-get install hostapd
  - sudo apt-get install wpasupplicant
  - sudo apt-get install linux-headers-$(uname -r)

before_script:
  # Install version 2.6.1 of Protocol Buffers
  - wget https://github.com/google/protobuf/releases/download/v2.6.1/protobuf-2.6.1.tar.gz
  - tar -xvzf protobuf-2.6.1.tar.gz
  - cd protobuf-2.6.1
  - ./configure && make
  - sudo make install
  - cd ..
  - sudo ldconfig

script:
  # Run the IRATI stack build script
  - mkdir build
  - mkdir -p $INSTALL_PREFIX
  - ./configure --prefix $INSTALL_PREFIX
  - sudo make install
